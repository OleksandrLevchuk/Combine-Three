[gd_scene load_steps=2 format=3 uid="uid://cakkjmb01b3cp"]

[sub_resource type="GDScript" id="GDScript_i7gq5"]
script/source = "extends Button
var offset: Vector2
var MAX_DESTROY_DISTANCE = 30
var initial_position: Vector2


func _ready():
	set_process( false )


func _process( _delta ):
	position = get_global_mouse_position() - offset


func _on_button_down():
	initial_position = position
	offset = get_global_mouse_position() - position
	set_process( true )


func _on_button_up():
	set_process( false )
	for node in get_parent().get_children():
		if node != self and position.distance_to( node.position ) < MAX_DESTROY_DISTANCE:
			node.queue_free()
			queue_free()
	position = initial_position
"

[node name="Button" type="Button"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -25.0
offset_top = -25.0
offset_right = 25.0
offset_bottom = 25.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_i7gq5")

[connection signal="button_down" from="." to="." method="_on_button_down"]
[connection signal="button_up" from="." to="." method="_on_button_up"]
